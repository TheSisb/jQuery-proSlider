(function(a){a.fn.proSlider=function(){function b(a,b,c,d,e,f){return this.min=a,this.max=b,this.step=c,this.value=d,this.classes=e,this.el=f,this.bulb,this.validate()?(this.addMarkup(),this.width=this.el.prev(".sliderLine").width()-30,this.slice=this.width/((this.max-this.min)/this.step),this.posFromLeft=(this.value-this.min)/this.step*this.slice,(this.value!=this.min||this.value!=""||this.value!==undefined)&&this.bulb.css("left",this.posFromLeft),this.bindToSelf(this),!0):!1}return b.prototype.validate=function(){return this.el.attr("type")!="range"?!1:this.step===0?!1:(this.max-this.min)%this.step!==0?!1:this.value>this.max||this.value<this.min?!1:!0},b.prototype.addMarkup=function(){this.el.hide(),this.el.before("<div class='sliderLine "+this.classes+"'><div class='sliderBulb'>"+this.value+"</div></div>"),this.bulb=this.el.prev(".sliderLine").children(".sliderBulb")},b.prototype.bindToSelf=function(b){this.bulb.bind("mousedown",function(c){var d=a(this),e=d.next("input"),f=c.pageX,g=0,h=0;a(document).bind("mousemove.nsA",function(a){g=a.pageX-f,f=a.pageX,b.posFromLeft+=g;if(b.posFromLeft<0||b.posFromLeft>b.width)return;d.css("left",b.posFromLeft),h=b.min+Math.round(b.posFromLeft/b.slice)*b.step,d.text(h),e.val(h)}),a(document).bind("mouseup",function(){a(document).unbind("mousemove.nsA")})})},this.each(function(){new b(parseInt(a(this).attr("min"),10),parseInt(a(this).attr("max"),10),parseInt(a(this).attr("step"),10),parseInt(a(this).attr("value"),10),a(this).attr("class").slice(7),a(this))})}})(jQuery)
