(function(a){a.fn.proSlider=function(){function b(a,b,c,d,e,f){return this.min=a,this.max=b,this.step=c,this.value=d,this.classes=e,this.el=f,this.bulb,this.validate()?(this.addMarkup(),this.width=this.el.prev(".sliderLine").width()-30,this.slice=this.width/((this.max-this.min)/this.step),(this.value!=this.min||this.value!=""||this.value!==undefined)&&this.bulb.css("left",(this.value-this.min)/this.step*this.slice),this.bindToSelf(this),!0):!1}return b.prototype.validate=function(){return this.el.attr("type")!="range"?!1:this.step===0?!1:(this.max-this.min)%this.step!==0?!1:this.value>this.max||this.value<this.min?!1:!0},b.prototype.addMarkup=function(){this.el.hide(),this.el.before("<div class='sliderLine "+this.classes+"'><div class='sliderBulb'>"+this.value+"</div></div>"),this.bulb=this.el.prev(".sliderLine").children(".sliderBulb")},b.prototype.bindToSelf=function(b){this.bulb.bind("mousedown",function(){var c=a(this);a(document).bind("mousemove.nsA",function(a){var d=a.pageX-45;if(d<0||d>b.width)return;c.css("left",d),d=b.min+Math.round(d/b.slice)*b.step,c.text(d),c.next("input").val(d)}),a(document).bind("mouseup",function(){a(document).unbind("mousemove.nsA")})})},this.each(function(){new b(parseInt(a(this).attr("min"),10),parseInt(a(this).attr("max"),10),parseInt(a(this).attr("step"),10),parseInt(a(this).attr("value"),10),a(this).attr("class").slice(7),a(this))})}})(jQuery)
